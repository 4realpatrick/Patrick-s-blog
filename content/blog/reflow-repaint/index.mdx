---
title: 重绘和重排
description: 重绘(Repaint)和重排(Reflow)和是浏览器渲染引擎执行的两个不同的过程,它们都与DOM操作和样式变化有关。
date: 2024-03-23
cover: cover.jpg
tags: ["HTML", "Dom"]
---

# 重绘和重排

重排(Reflow)和重绘(Repaint)是浏览器渲染引擎执行的两个不同的过程,它们都与DOM操作和样式变化有关。

1. **重排(Reflow):**
    - 重排是指浏览器重新计算并重新布局页面中的元素。当DOM结构发生变化,或者是影响了元素的几何属性(如宽度、高度、位置等)时,浏览器需要重新计算元素的几何属性,然后重新布局页面。
    - 重排的代价较高,因为它会触发整个渲染流程,可能导致页面的其他部分也需要重新计算和布局。
2. **重绘(Repaint):**
    - 重绘是指浏览器根据元素的样式(颜色、背景等)重新绘制页面的过程。当元素的样式发生变化,但没有影响其几何属性时,浏览器只需要重新绘制受影响的区域,而不需要重新计算布局。
    - 重绘的代价相对较低,因为它不涉及重新计算元素的几何属性,只需更新样式。

### **何时触发重排和重绘:**

- **触发重排的操作:**
    - 改变窗口大小
    - 改变字体大小
    - 添加或删除样式表
    - 操作DOM结构(添加、删除、修改DOM元素)
    - 修改元素的几何属性(宽度、高度、位置等)
- **触发重绘的操作:**
    - 修改元素的样式(颜色、背景、visibility等),但不影响其几何属性
    - 设置元素的className
    - 改变元素的内容

### **优化策略:**

- **使用样式批处理:** 将多次样式变化合并成一次操作,减少重排和重绘的次数。
- **避免使用强制同步布局属性:** 获取布局信息(如offsetTop、offsetLeft、offsetWidth、offsetHeight等)会触发强制同步布局,应该避免在频繁执行的代码中过度使用。
- **使用文档片段(Document Fragment):** 在多次操作DOM时,可以将操作放在文档片段中,最后一次性将文档片段添加到DOM,减少重排和重绘的次数。

理解重排和重绘对于优化前端性能非常重要,因为频繁的重排和重绘可能导致页面性能下降,特别是在大型或复杂的Web应用中。